<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Block Math Test - pseudocode.js</title>

    <!-- Setup KaTeX -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"
            integrity="sha512-EKW5YvKU3hpyyOcN6jQnAxO/L8gts+YdYV6Yymtl8pk9YlYFtqJgihORuRoBXK8/cOIlappdU6Ms8KdK6yBCgA=="
            crossorigin="anonymous" referrerpolicy="no-referrer">
    </script>

    <!-- Pseudocode -->
    <link rel="stylesheet" href="build/pseudocode.css" type="text/css">
    <script src="build/pseudocode.js" type="text/javascript"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { color: #333; }
        h2 { color: #555; margin-top: 40px; border-bottom: 1px solid #ddd; padding-bottom: 10px; }
        .test-case {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .description {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
            padding: 10px;
            background: #f0f7ff;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Block Math Support Test</h1>
    <p>Testing <code>$$...$$</code> and <code>\[...\]</code> display math in pseudocode.js</p>

    <h2>Test 1: Inline Math Only ($...$)</h2>
    <div class="test-case">
        <div class="description">
            <strong>Expected:</strong> Math renders inline with text, same size as surrounding text.
            The summation limits should appear <em>beside</em> the sigma symbol.
        </div>
        <pre id="test1" style="display:none">
\begin{algorithm}
\caption{Inline Math Test}
\begin{algorithmic}
\STATE Given $x$ and $y$, compute $z = x + y$
\STATE The sum is $\sum_{i=1}^n x_i$ (limits beside sigma)
\end{algorithmic}
\end{algorithm}
        </pre>
    </div>

    <h2>Test 2: Block Math with $$...$$</h2>
    <div class="test-case">
        <div class="description">
            <strong>Expected:</strong> Math renders larger and centered.
            The summation limits should appear <em>above and below</em> the sigma symbol.
        </div>
        <pre id="test2" style="display:none">
\begin{algorithm}
\caption{Block Math with \$\$}
\begin{algorithmic}
\STATE The sum formula:
\STATE $$\sum_{i=1}^n i = \frac{n(n+1)}{2}$$
\end{algorithmic}
\end{algorithm}
        </pre>
    </div>

    <h2>Test 3: Block Math with \[...\]</h2>
    <div class="test-case">
        <div class="description">
            <strong>Expected:</strong> Math renders larger and centered, same as $$...$$.
            The integral limits should appear properly positioned.
        </div>
        <pre id="test3" style="display:none">
\begin{algorithm}
\caption{Block Math with backslash brackets}
\begin{algorithmic}
\STATE The Gaussian integral:
\STATE \[\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}\]
\end{algorithmic}
\end{algorithm}
        </pre>
    </div>

    <h2>Test 4: Side-by-Side Comparison</h2>
    <div class="test-case">
        <div class="description">
            <strong>Expected:</strong> Clear visual difference between inline and block math.
            Compare how the limits are positioned on each sum.
        </div>
        <pre id="test4" style="display:none">
\begin{algorithm}
\caption{Inline vs Block Comparison}
\begin{algorithmic}
\STATE Inline sum: $\sum_{i=1}^n x_i$ (limits beside)
\STATE Block sum below:
\STATE $$\sum_{i=1}^n x_i$$
\STATE Notice: block has limits stacked above/below!
\end{algorithmic}
\end{algorithm}
        </pre>
    </div>

    <h2>Test 5: Complex Algorithm with Block Math</h2>
    <div class="test-case">
        <div class="description">
            <strong>Expected:</strong> Full algorithm with properly formatted display equations.
        </div>
        <pre id="test5" style="display:none">
\begin{algorithm}
\caption{Gradient Descent}
\begin{algorithmic}
\REQUIRE Learning rate $\alpha$, initial $\theta_0$
\ENSURE Optimized parameters $\theta^*$
\STATE Initialize $\theta \gets \theta_0$
\WHILE{not converged}
    \STATE Compute gradient:
    \STATE $$\nabla J(\theta) = \frac{1}{m} \sum_{i=1}^m (h_\theta(x^{(i)}) - y^{(i)}) x^{(i)}$$
    \STATE Update: $\theta \gets \theta - \alpha \nabla J(\theta)$
\ENDWHILE
\RETURN $\theta$
\end{algorithmic}
\end{algorithm}
        </pre>
    </div>

    <script>
        var tests = ['test1', 'test2', 'test3', 'test4', 'test5'];
        tests.forEach(function(id) {
            try {
                pseudocode.renderElement(document.getElementById(id), {
                    lineNumber: true,
                    noEnd: false
                });
            } catch (e) {
                document.getElementById(id).style.display = 'block';
                document.getElementById(id).innerHTML = '<span style="color:red">Error: ' + e.message + '</span>';
            }
        });
    </script>
</body>
</html>
